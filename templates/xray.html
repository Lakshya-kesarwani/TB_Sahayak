<html lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TB Sahayak X-ray</title>
  <link rel="stylesheet" >
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&amp;display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&amp;display=swap" rel="stylesheet">
  <style>

:root {
  --primary-blue: #4c8bf5;
  --secondary-blue: #4d7dbb;
  --nav-height: 80px;
}

.navbar {
  background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue));
  height: var(--nav-height);
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  backdrop-filter: blur(10px);
  padding: 0 1rem;
}

.navbar-brand {
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  transition: transform 0.3s ease;
}

.logo-icon {
  font-size: 1.8rem;
  margin-right: 0.8rem;
  transform: rotate(0deg);
  transition: transform 0.3s ease;
}

.navbar-brand:hover .logo-icon {
  transform: rotate(-15deg);
}

.brand-text {
  color: white;
  font-size: 1.5rem;
  position: relative;
}

.nav-link {
  color: rgba(255,255,255,0.9) !important;
  font-weight: 500;
  padding: 0.8rem 1.2rem !important;
  margin: 0 0.5rem;
  position: relative;
  transition: all 0.3s ease;
}

.nav-link::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: white;
  transition: width 0.3s ease;
}

.nav-link:hover {
  transform: translateY(-2px);
  opacity: 1;
}

.nav-link:hover::before {
  width: 100%;
}

.navbar-toggler {
  border: none;
  padding: 0.5rem;
}

.toggler-icon {
  display: block;
  width: 24px;
  height: 2px;
  background: white;
  margin: 5px 0;
  transition: all 0.3s ease;
}

.navbar-toggler[aria-expanded="true"] .toggler-icon:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.navbar-toggler[aria-expanded="true"] .toggler-icon:nth-child(2) {
  opacity: 0;
}

.navbar-toggler[aria-expanded="true"] .toggler-icon:nth-child(3) {
  transform: rotate(-45deg) translate(5px, -5px);
}

/* Mobile Menu */
@media (max-width: 991px) {
  .navbar-collapse {
      background: rgba(76, 139, 245, 0.95);
      backdrop-filter: blur(10px);
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 10px;
  }
  
  .nav-link {
      margin: 0.5rem 0;
      padding: 0.8rem 1rem !important;
      border-radius: 8px;
  }
  
  .nav-link:hover {
      background: rgba(255,255,255,0.1);
  }
}




      :root {
          --primary-blue: #4c8bf5;
          --secondary-blue: #4d7dbb;
          --light-bg: #f8f9fa;
      }

      body {
          font-family: 'Poppins', sans-serif;
          background-color: var(--light-bg);
      }

      .upload-section {
          background: white;
          border-radius: 15px;
          box-shadow: 0 4px 20px rgba(0,0,0,0.08);
          padding: 2rem;
          margin: 2rem auto;
          max-width: 800px;
          transition: transform 0.3s ease;
      }

      .upload-section:hover {
          transform: translateY(-5px);
      }

      .upload-label {
          border: 2px dashed var(--primary-blue);
          border-radius: 12px;
          padding: 2rem;
          cursor: pointer;
          transition: all 0.3s ease;
      }

      .upload-label:hover {
          background-color: rgba(76, 139, 245, 0.05);
          border-color: var(--secondary-blue);
      }

      .steps-list {
          list-style: none;
          counter-reset: step-counter;
          padding: 0;
      }

      .steps-list li {
          counter-increment: step-counter;
          margin-bottom: 1.5rem;
          padding-left: 2.5rem;
          position: relative;
          font-size: 1.1rem;
      }

      .steps-list li:before {
          content: counter(step-counter);
          position: absolute;
          left: 0;
          top: -0.2rem;
          width: 28px;
          height: 28px;
          background: var(--primary-blue);
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
      }

      .disclaimer-box {
          background: #fff3e0;
          border-left: 4px solid #ffb300;
          padding: 1rem;
          border-radius: 6px;
          margin: 2rem 0;
      }
  </style>
</head>
<body>
  <!-- Navbar (Keep your existing navbar) -->
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
        <!-- Brand with subtle animation -->
        <a class="navbar-brand" href="#">
            <span class="logo-icon">ðŸ©º</span>
            <span class="brand-text">TB Sahayak</span>
        </a>

        <!-- Hamburger Icon with animation -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="toggler-icon"></span>
            <span class="toggler-icon"></span>
            <span class="toggler-icon"></span>
        </button>

        <!-- Nav Items -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/guide">Guide</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/find">Find Doctors</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/symptom">Symptoms</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/xray">X-ray</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/contact">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

  <main class="container " style="padding-top: 10%;">
      <div class="text-center mb-5">
          <h2 class="display-5 fw-bold text-primary mb-3">Chest X-ray Analysis</h2>
          <p class="lead text-muted">AI-powered tuberculosis detection with instant results</p>
      </div>

      <div class="upload-section">
          <h4 class="mb-4 text-center">ðŸ“Œ Simple Process</h4>
          <ul class="steps-list">
              <li>Upload a clear chest X-ray image (JPEG/PNG format)</li>
              <li>Our AI will analyze the image in seconds</li>
              <li>Receive detailed report with recommendations</li>
          </ul>

          <div class="mt-5">
              <div class="upload-label text-center">
                  <div class="mb-3">
                      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-cloud-upload text-primary" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"></path>
                          <path fill-rule="evenodd" d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"></path>
                      </svg>
                  </div>
                  <h5 class="mb-3">Drag &amp; Drop X-ray Image</h5>
                  <p class="text-muted mb-4">or click to browse files</p>
           <form id="myForm">       
                  <div class="input-group mb-3 mx-auto" style="max-width: 400px;">
                      <input type="file" class="form-control" id="xrayUpload" accept="image/*">
                      <button class="btn btn-primary" type="submit">
                          <i class="bi bi-upload me-2"></i>Upload
                      </button>
                  </div>
              </form>
                  <small class="text-muted">Supported formats: .jpg, .png (max 5MB)</small>
              </div>
          </div>

          <div class="text-center" style="margin-top: 20px; display: flex; flex-direction: row; align-items: center; justify-content: center;">
            <img id="preview" src="#" alt="X-ray Preview" style="display: none; max-width: 200px; margin-top: 10px;" />
        
            <!-- Loading Section (Spinner + Animated Text) -->
            <div id="loading-container" style="display: none; margin-left: 20px; ">
                <div class="spinner-border text-primary" role="status"></div>
                <span id="loading-text" class="fw-bold text-primary ms-2">Loading</span>
            </div>
        
            <p id="result" class="text-success fw-bold fs-4" style="margin-left: 20px;"></p>
        </div>
          <!-- Preview -->
      

          <div class="disclaimer-box">
              <p class="mb-0 text-center">
                  <i class="bi bi-info-circle-fill me-2"></i>
                  This AI analysis tool assists healthcare professionals and should not replace clinical diagnosis.
              </p>
          </div>
      </div>
  </main>

  <!-- Footer (Keep your existing footer) -->
  <div style="background: #2c3e50; color: white; padding: 2rem; margin-top: 3rem;">
    <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
        <!-- Contact Info -->
        <div style="margin-bottom: 1rem;">
            <p style="margin: 0.5rem 0;">
                ðŸ“ž <a href="tel:+917738997464" style="color: white; text-decoration: none;">+91 77389 97464</a> | 
                ðŸ“§ <a href="mailto:maskekunal.mk@gmail.com" style="color: white; text-decoration: none;">maskekunal.mk@gmail.com</a>
            </p>
        </div>
        
        <!-- Copyright -->
        <div style="border-top: 1px solid #34495e; padding-top: 1rem;">
            <p style="margin: 0; font-size: 0.9em;">
                Â© 2023 TB Sahayak. All rights reserved.
                <!-- For current year automatically: -->
                <!-- Â© <script>document.write(new Date().getFullYear())</script> TB Sahayak -->
            </p>
        </div>
    </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body></html>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("xrayUpload").addEventListener("change", function (event) {
        let file = event.target.files[0];
        if (file) {
            let reader = new FileReader();
            reader.onload = function (e) {
                let img = document.getElementById("preview");
                if (img) {
                    img.src = e.target.result;
                    img.style.display = "block";
                }
            };
            reader.readAsDataURL(file);
        }
    });


  document.getElementById("myForm").addEventListener("submit", function (event) {
      event.preventDefault(); 

      let formData = new FormData();
      let fileInput = document.getElementById("xrayUpload").files[0];
      if (!fileInput) {
          alert("Please select an image first!");
          return;
      }

      formData.append("file", fileInput);
      // Show loading text
      document.getElementById("loading-container").style.display = "flex";
      document.getElementById("result").innerText = "";

      // Start typewriter animation
      let loadingText = document.getElementById("loading-text");
      let dots = "";
      let interval = setInterval(() => {
          dots = dots.length < 3 ? dots + "." : "";
          loadingText.innerText = "Loading" + dots;
      }, 500);

      fetch("/pred", {
          method: "POST",
          body: formData
      })
      .then(response => response.json())
      .then(data => {
          console.log(data);
          document.getElementById("result").innerText = "Prediction: " + String(data["data"]);
      })
      .catch(error => {
          console.error("Error:", error);
          document.getElementById("result").innerText = "Upload failed. Try again.";
      }).finally(() => {
        // Hide loading spinner and animation after response
        clearInterval(interval);
        document.getElementById("loading-container").style.display = "none";
    });
  })
})
</script>